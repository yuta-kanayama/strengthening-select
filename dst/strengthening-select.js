var OrderedSelectModel=Backbone.Model.extend({defaults:function(){return{val:"",selected:!1,iniVal:""}},initialize:function(){_.bindAll(this,"changeValue"),this.on("change:val",this.changeValue)},changeValue:function(){var e=this.get("val"),t=this.get("iniVal"),s=e!=t?!0:!1;this.set("selected",s)}}),OrderedSelectCollection=Backbone.Collection.extend({model:OrderedSelectModel}),OrderedSelect=Backbone.View.extend({events:{"change .ordered-select__select":"changeSelect"},initialize:function(){_.bindAll(this,"changeSelect","switchSubmitStatus","disableSelect","isCanSubmit"),this.$enabled=this.$(".ordered-select__submit--enabled"),this.$disabled=this.$(".ordered-select__submit--disabled"),this.$select=this.$(".ordered-select__select"),this.select=new OrderedSelectCollection,this.$select.each(_.bind(function(e,t){var s=$(t),l=s.val();this.select.add({val:l,iniVal:l})},this)),this.disableSelect(this.$select.not(":first")),this.switchSubmitStatus()},changeSelect:function(e){var t=$(e.target),s=t.val(),l=this.$select.index(e.target);this.select.at(l).set("val",s),this.switchSubmitStatus()},switchSubmitStatus:function(){this.isCanSubmit()?(this.$enabled.css("display","block"),this.$disabled.css("display","none")):(this.$enabled.css("display","none"),this.$disabled.css("display","block"))},enableSelect:function(e){e.removeClass("ordered-select__select--disabled").addClass("ordered-select__select--enabled").find("option").removeAttr("disabled"),e.parents(".ordered-select__select-wrapper").removeClass("ordered-select__select-wrapper--disabled").addClass("ordered-select__select-wrapper--enabled")},disableSelect:function(e){e.removeClass("ordered-select__select--enabled").addClass("ordered-select__select--disabled").find("option").attr("disabled","disabled"),e.parents(".ordered-select__select-wrapper").removeClass("ordered-select__select-wrapper--enabled").addClass("ordered-select__select-wrapper--disabled")},isCanSubmit:function(){var e=!0;return this.select.each(_.bind(function(t,s){var l=t.get("selected");l||(e=!1),s&&(this.select.at(s-1).get("selected")?this.enableSelect(this.$select.eq(s)):this.disableSelect(this.$select.eq(s)))},this)),e}}),SelectiveSelectModel=Backbone.Model.extend({defaults:function(){return{val:"",selected:!1,iniVal:""}},initialize:function(){_.bindAll(this,"changeValue"),this.on("change:val",this.changeValue)},changeValue:function(){var e=this.get("val"),t=this.get("iniVal"),s=e!=t?!0:!1;this.set("selected",s)}}),SelectiveSelectCollection=Backbone.Collection.extend({model:SelectiveSelectModel}),SelectiveSelect=Backbone.View.extend({events:{"change .selective-select__select":"changeSelect"},initialize:function(){_.bindAll(this,"changeSelect","switchSubmitStatus","disableSelect","isCanSubmit"),this.$enabled=this.$(".selective-select__submit--enabled"),this.$disabled=this.$(".selective-select__submit--disabled"),this.$select=this.$(".selective-select__select"),this.select=new SelectiveSelectCollection,this.$select.each(_.bind(function(e,t){var s=$(t),l=s.val();this.select.add({val:l,iniVal:l})},this)),this.disableSelect(this.$select.not(":first")),this.switchSubmitStatus()},changeSelect:function(e){var t=$(e.target),s=t.val(),l=this.$select.index(e.target);this.select.at(l).set("val",s),this.switchSubmitStatus()},switchSubmitStatus:function(){this.isCanSubmit()?(this.$enabled.css("display","block"),this.$disabled.css("display","none")):(this.$enabled.css("display","none"),this.$disabled.css("display","block"))},enableSelect:function(e){e.removeClass("selective-select__select--disabled").addClass("selective-select__select--enabled").find("option").removeAttr("disabled"),e.parents(".selective-select__select-wrapper").removeClass("selective-select__select-wrapper--disabled").addClass("selective-select__select-wrapper--enabled")},disableSelect:function(e){e.removeClass("selective-select__select--enabled").addClass("selective-select__select--disabled").find("option").attr("disabled","disabled"),e.parents(".selective-select__select-wrapper").removeClass("selective-select__select-wrapper--enabled").addClass("selective-select__select-wrapper--disabled")},isCanSubmit:function(){var e=!0;return this.select.each(_.bind(function(t,s){var l=t.get("selected");l||(e=!1),s&&(this.select.at(s-1).get("selected")?this.enableSelect(this.$select.eq(s)):this.disableSelect(this.$select.eq(s)))},this)),e}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyZWQtc2VsZWN0LmpzIiwic2VsZWN0aXZlLXNlbGVjdC5qcyJdLCJuYW1lcyI6WyJPcmRlcmVkU2VsZWN0TW9kZWwiLCJCYWNrYm9uZSIsIk1vZGVsIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJ2YWwiLCJzZWxlY3RlZCIsImluaVZhbCIsImluaXRpYWxpemUiLCJfIiwiYmluZEFsbCIsInRoaXMiLCJvbiIsImNoYW5nZVZhbHVlIiwiZ2V0Iiwic2V0IiwiT3JkZXJlZFNlbGVjdENvbGxlY3Rpb24iLCJDb2xsZWN0aW9uIiwibW9kZWwiLCJPcmRlcmVkU2VsZWN0IiwiVmlldyIsImV2ZW50cyIsImNoYW5nZSAub3JkZXJlZC1zZWxlY3RfX3NlbGVjdCIsIiRlbmFibGVkIiwiJCIsIiRkaXNhYmxlZCIsIiRzZWxlY3QiLCJzZWxlY3QiLCJlYWNoIiwiYmluZCIsImkiLCJlIiwiJG1lIiwiYWRkIiwiZGlzYWJsZVNlbGVjdCIsIm5vdCIsInN3aXRjaFN1Ym1pdFN0YXR1cyIsImNoYW5nZVNlbGVjdCIsInRhcmdldCIsImluZGV4IiwiYXQiLCJpc0NhblN1Ym1pdCIsImNzcyIsImVuYWJsZVNlbGVjdCIsIiR0YXJnZXQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZmluZCIsInJlbW92ZUF0dHIiLCJwYXJlbnRzIiwiYXR0ciIsInJlc3VsdCIsImVxIiwiU2VsZWN0aXZlU2VsZWN0TW9kZWwiLCJTZWxlY3RpdmVTZWxlY3RDb2xsZWN0aW9uIiwiU2VsZWN0aXZlU2VsZWN0IiwiY2hhbmdlIC5zZWxlY3RpdmUtc2VsZWN0X19zZWxlY3QiXSwibWFwcGluZ3MiOiJBQVVBLEdBQUFBLG9CQUFBQyxTQUFBQyxNQUFBQyxRQUNBQyxTQUFBLFdBQ0EsT0FDQUMsSUFBQSxHQUNBQyxVQUFBLEVBQ0FDLE9BQUEsS0FJQUMsV0FBQSxXQUNBQyxFQUFBQyxRQUFBQyxLQUFBLGVBQ0FBLEtBQUFDLEdBQUEsYUFBQUQsS0FBQUUsY0FHQUEsWUFBQSxXQUNBLEdBQUFS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LElBQUEsV0FDQVIsS0FBQTZDLEdBQUEsR0FDQVosSUFDQTVCLEtBQUFnQixPQUFBYSxHQUFBRCxFQUFBLEdBQUF6QixJQUFBLFlBQ0FILEtBQUFnQyxhQUFBaEMsS0FBQWUsUUFBQTBCLEdBQUFiLElBRUE1QixLQUFBdUIsY0FBQXZCLEtBQUFlLFFBQUEwQixHQUFBYixNQUdBNUIsT0FDQXdDIiwiZmlsZSI6InN0cmVuZ3RoZW5pbmctc2VsZWN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiMgT3JkZXJlZFNlbGVjdFxuKi9cblxuXG5cbi8qXG4jIyBTZWxlY3QgTW9kZWxcbiovXG5cbnZhciBPcmRlcmVkU2VsZWN0TW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICBkZWZhdWx0czogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbDogJycsXG4gICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICBpbmlWYWw6ICcnXG4gICAgfVxuICB9LFxuICBcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgXy5iaW5kQWxsKHRoaXMsICdjaGFuZ2VWYWx1ZScpO1xuICAgIHRoaXMub24oJ2NoYW5nZTp2YWwnLCB0aGlzLmNoYW5nZVZhbHVlKTtcbiAgfSxcbiAgXG4gIGNoYW5nZVZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsID0gdGhpcy5nZXQoJ3ZhbCcpLFxuICAgICAgICBpbmlWYWwgPSB0aGlzLmdldCgnaW5pVmFsJyksXG4gICAgICAgIHNlbGVjdGVkID0gKHZhbCAhPSBpbmlWYWwpP3RydWU6ZmFsc2U7XG4gICAgdGhpcy5zZXQoJ3NlbGVjdGVkJywgc2VsZWN0ZWQpO1xuICB9XG59KTtcblxuXG5cbi8qXG4jIyBcbiovXG5cbnZhciBPcmRlcmVkU2VsZWN0Q29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgbW9kZWw6IE9yZGVyZWRTZWxlY3RNb2RlbFxufSk7XG5cblxuXG4vKlxuIyMgXG4qL1xuXG52YXIgT3JkZXJlZFNlbGVjdCA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgXG4gIGV2ZW50czoge1xuICAgICdjaGFuZ2UgLm9yZGVyZWQtc2VsZWN0X19zZWxlY3QnOiAnY2hhbmdlU2VsZWN0J1xuICB9LFxuICBcbiAgXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIF8uYmluZEFsbCh0aGlzLCAnY2hhbmdlU2VsZWN0JywgJ3N3aXRjaFN1Ym1pdFN0YXR1cycsICdkaXNhYmxlU2VsZWN0JywgJ2lzQ2FuU3VibWl0Jyk7XG4gICAgXG4gICAgdGhpcy4kZW5hYmxlZCA9IHRoaXMuJCgnLm9yZGVyZWQtc2VsZWN0X19zdWJtaXQtLWVuYWJsZWQnKTtcbiAgICB0aGlzLiRkaXNhYmxlZCA9IHRoaXMuJCgnLm9yZGVyZWQtc2VsZWN0X19zdWJtaXQtLWRpc2FibGVkJyk7XG4gICAgdGhpcy4kc2VsZWN0ID0gdGhpcy4kKCcub3JkZXJlZC1zZWxlY3RfX3NlbGVjdCcpO1xuICAgIFxuICAgIHRoaXMuc2VsZWN0ID0gbmV3IE9yZGVyZWRTZWxlY3RDb2xsZWN0aW9uKCk7XG4gICAgdGhpcy4kc2VsZWN0LmVhY2goXy5iaW5kKGZ1bmN0aW9uKGksIGUpIHtcbiAgICAgIHZhciAkbWUgPSAkKGUpLFxuICAgICAgICAgIHZhbCA9ICRtZS52YWwoKTtcbiAgICAgIHRoaXMuc2VsZWN0LmFkZCh7XG4gICAgICAgIHZhbDogdmFsLFxuICAgICAgICBpbmlWYWw6IHZhbFxuICAgICAgfSk7XG4gICAgfSwgdGhpcykpO1xuICAgIFxuICAgIHRoaXMuZGlzYWJsZVNlbGVjdCggdGhpcy4kc2VsZWN0Lm5vdCgnOmZpcnN0JykgKTtcbiAgICBcbiAgICB0aGlzLnN3aXRjaFN1Ym1pdFN0YXR1cygpO1xuICB9LFxuICBcbiAgXG4gIGNoYW5nZVNlbGVjdDogZnVuY3Rpb24oZSkge1xuICAgIHZhciAkbWUgPSAkKGUudGFyZ2V0KSxcbiAgICAgICAgdmFsID0gJG1lLnZhbCgpLFxuICAgICAgICBpbmRleCA9IHRoaXMuJHNlbGVjdC5pbmRleChlLnRhcmdldCk7XG4gICAgXG4gICAgdGhpcy5zZWxlY3QuYXQoaW5kZXgpLnNldCgndmFsJywgdmFsKTtcbiAgICBcbiAgICB0aGlzLnN3aXRjaFN1Ym1pdFN0YXR1cygpO1xuICB9LFxuICBcbiAgXG4gIHN3aXRjaFN1Ym1pdFN0YXR1czogZnVuY3Rpb24oKXtcbiAgICBpZih0aGlzLmlzQ2FuU3VibWl0KCkpe1xuICAgICAgdGhpcy4kZW5hYmxlZC5jc3MoJ2Rpc3BsYXknLCdibG9jaycpO1xuICAgICAgdGhpcy4kZGlzYWJsZWQuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRlbmFibGVkLmNzcygnZGlzcGxheScsJ25vbmUnKTtcbiAgICAgIHRoaXMuJGRpc2FibGVkLmNzcygnZGlzcGxheScsJ2Jsb2NrJyk7XG4gICAgfVxuICB9LFxuICBcbiAgXG4gIGVuYWJsZVNlbGVjdDogZnVuY3Rpb24oJHRhcmdldCkge1xuICAgICR0YXJnZXRcbiAgICAgIC5yZW1vdmVDbGFzcygnb3JkZXJlZC1zZWxlY3RfX3NlbGVjdC0tZGlzYWJsZWQnKVxuICAgICAgLmFkZENsYXNzKCdvcmRlcmVkLXNlbGVjdF9fc2VsZWN0LS1lbmFibGVkJylcbiAgICAgIC5maW5kKCdvcHRpb24nKVxuICAgICAgLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgJHRhcmdldFxuICAgICAgLnBhcmVudHMoJy5vcmRlcmVkLXNlbGVjdF9fc2VsZWN0LXdyYXBwZXInKVxuICAgICAgLnJlbW92ZUNsYXNzKCdvcmRlcmVkLXNlbGVjdF9fc2VsZWN0LXdyYXBwZXItLWRpc2FibGVkJylcbiAgICAgIC5hZGRDbGFzcygnb3JkZXJlZC1zZWxlY3RfX3NlbGVjdC13cmFwcGVyLS1lbmFibGVkJyk7XG4gIH0sXG4gIFxuICBcbiAgZGlzYWJsZVNlbGVjdDogZnVuY3Rpb24oJHRhcmdldCkge1xuICAgICR0YXJnZXRcbiAgICAgIC5yZW1vdmVDbGFzcygnb3JkZXJlZC1zZWxlY3RfX3NlbGVjdC0tZW5hYmxlZCcpXG4gICAgICAuYWRkQ2xhc3MoJ29yZGVyZWQtc2VsZWN0X19zZWxlY3QtLWRpc2FibGVkJylcbiAgICAgIC5maW5kKCdvcHRpb24nKVxuICAgICAgLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgJHRhcmdldFxuICAgICAgLnBhcmVudHMoJy5vcmRlcmVkLXNlbGVjdF9fc2VsZWN0LXdyYXBwZXInKVxuICAgICAgLnJlbW92ZUNsYXNzKCdvcmRlcmVkLXNlbGVjdF9fc2VsZWN0LXdyYXBwZXItLWVuYWJsZWQnKVxuICAgICAgLmFkZENsYXNzKCdvcmRlcmVkLXNlbGVjdF9fc2VsZWN0LXdyYXBwZXItLWRpc2FibGVkJyk7XG4gIH0sXG4gIFxuICBcbiAgaXNDYW5TdWJtaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXN1bHQgPSB0cnVlO1xuICAgIHRoaXMuc2VsZWN0LmVhY2goXy5iaW5kKGZ1bmN0aW9uKG1vZGVsLCBpbmRleCl7XG4gICAgICB2YXIgc2VsZWN0ZWQgPSBtb2RlbC5nZXQoJ3NlbGVjdGVkJyk7XG4gICAgICBpZighc2VsZWN0ZWQpIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgaWYoaW5kZXgpIHtcbiAgICAgICAgaWYodGhpcy5zZWxlY3QuYXQoaW5kZXgtMSkuZ2V0KCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgdGhpcy5lbmFibGVTZWxlY3QodGhpcy4kc2VsZWN0LmVxKGluZGV4KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5kaXNhYmxlU2VsZWN0KHRoaXMuJHNlbGVjdC5lcShpbmRleCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgdGhpcykpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgXG59KTtcbiIsIi8qXG4jIFNlbGVjdGl2ZVNlbGVjdFxuKi9cblxuXG5cbi8qXG4jIyBTZWxlY3QgTW9kZWxcbiovXG5cbnZhciBTZWxlY3RpdmVTZWxlY3RNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gIGRlZmF1bHRzOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsOiAnJyxcbiAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgIGluaVZhbDogJydcbiAgICB9XG4gIH0sXG4gIFxuICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICBfLmJpbmRBbGwodGhpcywgJ2NoYW5nZVZhbHVlJyk7XG4gICAgdGhpcy5vbignY2hhbmdlOnZhbCcsIHRoaXMuY2hhbmdlVmFsdWUpO1xuICB9LFxuICBcbiAgY2hhbmdlVmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWwgPSB0aGlzLmdldCgndmFsJyksXG4gICAgICAgIGluaVZhbCA9IHRoaXMuZ2V0KCdpbmlWYWwnKSxcbiAgICAgICAgc2VsZWN0ZWQgPSAodmFsICE9IGluaVZhbCk/dHJ1ZTpmYWxzZTtcbiAgICB0aGlzLnNldCgnc2VsZWN0ZWQnLCBzZWxlY3RlZCk7XG4gIH1cbn0pO1xuXG5cblxuLypcbiMjIFxuKi9cblxudmFyIFNlbGVjdGl2ZVNlbGVjdENvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG4gIG1vZGVsOiBTZWxlY3RpdmVTZWxlY3RNb2RlbFxufSk7XG5cblxuXG4vKlxuIyMgXG4qL1xuXG52YXIgU2VsZWN0aXZlU2VsZWN0ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICBcbiAgZXZlbnRzOiB7XG4gICAgJ2NoYW5nZSAuc2VsZWN0aXZlLXNlbGVjdF9fc2VsZWN0JzogJ2NoYW5nZVNlbGVjdCdcbiAgfSxcbiAgXG4gIFxuICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICBfLmJpbmRBbGwodGhpcywgJ2NoYW5nZVNlbGVjdCcsICdzd2l0Y2hTdWJtaXRTdGF0dXMnLCAnZGlzYWJsZVNlbGVjdCcsICdpc0NhblN1Ym1pdCcpO1xuICAgIFxuICAgIHRoaXMuJGVuYWJsZWQgPSB0aGlzLiQoJy5zZWxlY3RpdmUtc2VsZWN0X19zdWJtaXQtLWVuYWJsZWQnKTtcbiAgICB0aGlzLiRkaXNhYmxlZCA9IHRoaXMuJCgnLnNlbGVjdGl2ZS1zZWxlY3RfX3N1Ym1pdC0tZGlzYWJsZWQnKTtcbiAgICB0aGlzLiRzZWxlY3QgPSB0aGlzLiQoJy5zZWxlY3RpdmUtc2VsZWN0X19zZWxlY3QnKTtcbiAgICBcbiAgICB0aGlzLnNlbGVjdCA9IG5ldyBTZWxlY3RpdmVTZWxlY3RDb2xsZWN0aW9uKCk7XG4gICAgdGhpcy4kc2VsZWN0LmVhY2goXy5iaW5kKGZ1bmN0aW9uKGksIGUpIHtcbiAgICAgIHZhciAkbWUgPSAkKGUpLFxuICAgICAgICAgIHZhbCA9ICRtZS52YWwoKTtcbiAgICAgIHRoaXMuc2VsZWN0LmFkZCh7XG4gICAgICAgIHZhbDogdmFsLFxuICAgICAgICBpbmlWYWw6IHZhbFxuICAgICAgfSk7XG4gICAgfSwgdGhpcykpO1xuICAgIFxuICAgIHRoaXMuZGlzYWJsZVNlbGVjdCggdGhpcy4kc2VsZWN0Lm5vdCgnOmZpcnN0JykgKTtcbiAgICBcbiAgICB0aGlzLnN3aXRjaFN1Ym1pdFN0YXR1cygpO1xuICB9LFxuICBcbiAgXG4gIGNoYW5nZVNlbGVjdDogZnVuY3Rpb24oZSkge1xuICAgIHZhciAkbWUgPSAkKGUudGFyZ2V0KSxcbiAgICAgICAgdmFsID0gJG1lLnZhbCgpLFxuICAgICAgICBpbmRleCA9IHRoaXMuJHNlbGVjdC5pbmRleChlLnRhcmdldCk7XG4gICAgXG4gICAgdGhpcy5zZWxlY3QuYXQoaW5kZXgpLnNldCgndmFsJywgdmFsKTtcbiAgICBcbiAgICB0aGlzLnN3aXRjaFN1Ym1pdFN0YXR1cygpO1xuICB9LFxuICBcbiAgXG4gIHN3aXRjaFN1Ym1pdFN0YXR1czogZnVuY3Rpb24oKXtcbiAgICBpZih0aGlzLmlzQ2FuU3VibWl0KCkpe1xuICAgICAgdGhpcy4kZW5hYmxlZC5jc3MoJ2Rpc3BsYXknLCdibG9jaycpO1xuICAgICAgdGhpcy4kZGlzYWJsZWQuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRlbmFibGVkLmNzcygnZGlzcGxheScsJ25vbmUnKTtcbiAgICAgIHRoaXMuJGRpc2FibGVkLmNzcygnZGlzcGxheScsJ2Jsb2NrJyk7XG4gICAgfVxuICB9LFxuICBcbiAgXG4gIGVuYWJsZVNlbGVjdDogZnVuY3Rpb24oJHRhcmdldCkge1xuICAgICR0YXJnZXRcbiAgICAgIC5yZW1vdmVDbGFzcygnc2VsZWN0aXZlLXNlbGVjdF9fc2VsZWN0LS1kaXNhYmxlZCcpXG4gICAgICAuYWRkQ2xhc3MoJ3NlbGVjdGl2ZS1zZWxlY3RfX3NlbGVjdC0tZW5hYmxlZCcpXG4gICAgICAuZmluZCgnb3B0aW9uJylcbiAgICAgIC5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgICR0YXJnZXRcbiAgICAgIC5wYXJlbnRzKCcuc2VsZWN0aXZlLXNlbGVjdF9fc2VsZWN0LXdyYXBwZXInKVxuICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3RpdmUtc2VsZWN0X19zZWxlY3Qtd3JhcHBlci0tZGlzYWJsZWQnKVxuICAgICAgLmFkZENsYXNzKCdzZWxlY3RpdmUtc2VsZWN0X19zZWxlY3Qtd3JhcHBlci0tZW5hYmxlZCcpO1xuICB9LFxuICBcbiAgXG4gIGRpc2FibGVTZWxlY3Q6IGZ1bmN0aW9uKCR0YXJnZXQpIHtcbiAgICAkdGFyZ2V0XG4gICAgICAucmVtb3ZlQ2xhc3MoJ3NlbGVjdGl2ZS1zZWxlY3RfX3NlbGVjdC0tZW5hYmxlZCcpXG4gICAgICAuYWRkQ2xhc3MoJ3NlbGVjdGl2ZS1zZWxlY3RfX3NlbGVjdC0tZGlzYWJsZWQnKVxuICAgICAgLmZpbmQoJ29wdGlvbicpXG4gICAgICAuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAkdGFyZ2V0XG4gICAgICAucGFyZW50cygnLnNlbGVjdGl2ZS1zZWxlY3RfX3NlbGVjdC13cmFwcGVyJylcbiAgICAgIC5yZW1vdmVDbGFzcygnc2VsZWN0aXZlLXNlbGVjdF9fc2VsZWN0LXdyYXBwZXItLWVuYWJsZWQnKVxuICAgICAgLmFkZENsYXNzKCdzZWxlY3RpdmUtc2VsZWN0X19zZWxlY3Qtd3JhcHBlci0tZGlzYWJsZWQnKTtcbiAgfSxcbiAgXG4gIFxuICBpc0NhblN1Ym1pdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3VsdCA9IHRydWU7XG4gICAgdGhpcy5zZWxlY3QuZWFjaChfLmJpbmQoZnVuY3Rpb24obW9kZWwsIGluZGV4KXtcbiAgICAgIHZhciBzZWxlY3RlZCA9IG1vZGVsLmdldCgnc2VsZWN0ZWQnKTtcbiAgICAgIGlmKCFzZWxlY3RlZCkgcmVzdWx0ID0gZmFsc2U7XG4gICAgICBpZihpbmRleCkge1xuICAgICAgICBpZih0aGlzLnNlbGVjdC5hdChpbmRleC0xKS5nZXQoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdCh0aGlzLiRzZWxlY3QuZXEoaW5kZXgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc2FibGVTZWxlY3QodGhpcy4kc2VsZWN0LmVxKGluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB0aGlzKSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9