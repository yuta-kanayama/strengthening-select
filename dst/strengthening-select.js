var OrderedSelectModel=Backbone.Model.extend({defaults:function(){return{val:"",selected:!1,iniVal:""}},initialize:function(){_.bindAll(this,"changeValue"),this.on("change:val",this.changeValue)},changeValue:function(){var e=this.get("val"),t=this.get("iniVal"),s=e!=t?!0:!1;this.set("selected",s)}}),OrderedSelectCollection=Backbone.Collection.extend({model:OrderedSelectModel}),OrderedSelect=Backbone.View.extend({events:{"change .ordered-select__select":"changeSelect"},initialize:function(){_.bindAll(this,"changeSelect","switchSubmitStatus","enableSelect","disableSelect","isCanSubmit"),this.$enabled=this.$(".ordered-select__submit--enabled"),this.$disabled=this.$(".ordered-select__submit--disabled"),this.$select=this.$(".ordered-select__select"),this.select=new OrderedSelectCollection,this.$select.each(_.bind(function(e,t){var s=$(t),l=s.val();this.select.add({val:l,iniVal:l})},this)),this.disableSelect(this.$select.not(":first")),this.switchSubmitStatus()},changeSelect:function(e){var t=$(e.target),s=t.val(),l=this.$select.index(e.target);this.select.at(l).set("val",s),this.switchSubmitStatus()},switchSubmitStatus:function(){this.isCanSubmit()?(this.$enabled.css("display","block"),this.$disabled.css("display","none")):(this.$enabled.css("display","none"),this.$disabled.css("display","block"))},enableSelect:function(e){e.removeClass("ordered-select__select--disabled").addClass("ordered-select__select--enabled").find("option").removeAttr("disabled"),e.parents(".ordered-select__select-wrapper").removeClass("ordered-select__select-wrapper--disabled").addClass("ordered-select__select-wrapper--enabled")},disableSelect:function(e){e.removeClass("ordered-select__select--enabled").addClass("ordered-select__select--disabled").find("option").attr("disabled","disabled"),e.parents(".ordered-select__select-wrapper").removeClass("ordered-select__select-wrapper--enabled").addClass("ordered-select__select-wrapper--disabled")},isCanSubmit:function(){var e=!0;return this.select.each(_.bind(function(t,s){var l=t.get("selected");l||(e=!1),s&&(this.select.at(s-1).get("selected")?this.enableSelect(this.$select.eq(s)):this.disableSelect(this.$select.eq(s)))},this)),e}}),SelectiveSelectModel=Backbone.Model.extend({defaults:function(){return{val:"",selected:!1,iniVal:""}},initialize:function(){_.bindAll(this,"changeValue"),this.on("change:val",this.changeValue)},changeValue:function(){var e=this.get("val"),t=this.get("iniVal"),s=e!=t?!0:!1;this.set("selected",s)}}),SelectiveSelectCollection=Backbone.Collection.extend({model:SelectiveSelectModel}),SelectiveSelect=Backbone.View.extend({events:{"change .selective-select__select":"changeSelect"},initialize:function(e){_.bindAll(this,"resetVal","changeSelect","switchSubmitStatus","isCanSubmit");var t={target:"all"};this.opt=_.extend(t,e),this.$enabled=this.$(".selective-select__submit--enabled"),this.$disabled=this.$(".selective-select__submit--disabled"),this.$select=this.$(".selective-select__select"),this.select=new SelectiveSelectCollection,this.$select.each(_.bind(function(e,t){var s=$(t),l=s.val();this.select.add({val:l,iniVal:l})},this)),this.switchSubmitStatus()},resetVal:function(){this.select.each(_.bind(function(e,t){var s=this.$select.eq(t).val();null==s&&(s=""),e.set("val",s)},this))},changeSelect:function(e){var t=$(e.target),s=t.val(),l=this.$select.index(e.target);this.select.at(l).set("val",s),this.switchSubmitStatus()},switchSubmitStatus:function(){this.isCanSubmit()?(this.$enabled.css("display","block"),this.$disabled.css("display","none")):(this.$enabled.css("display","none"),this.$disabled.css("display","block"))},isCanSubmit:function(){if(this.resetVal(),"any"==this.opt.target){var e=!1;this.select.each(_.bind(function(t,s){var l=t.get("selected");l&&(e=!0)},this))}else{var e=!0;this.select.each(_.bind(function(t,s){var l=t.get("selected");l||(e=!1)},this))}return e}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyZWQtc2VsZWN0LmpzIiwic2VsZWN0aXZlLXNlbGVjdC5qcyJdLCJuYW1lcyI6WyJPcmRlcmVkU2VsZWN0TW9kZWwiLCJCYWNrYm9uZSIsIk1vZGVsIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJ2YWwiLCJzZWxlY3RlZCIsImluaVZhbCIsImluaXRpYWxpemUiLCJfIiwiYmluZEFsbCIsInRoaXMiLCJvbiIsImNoYW5nZVZhbHVlIiwiZ2V0Iiwic2V0IiwiT3JkZXJlZFNlbGVjdENvbGxlY3Rpb24iLCJDb2xsZWN0aW9uIiwibW9kZWwiLCJPcmRlcmVkU2VsZWN0IiwiVmlldyIsImV2ZW50cyIsImNoYW5nZSAub3JkZXJlZC1zZWxlY3RfX3NlbGVjdCIsIiRlbmFibGVkIiwiJCIsIiRkaXNhYmxlZCIsIiRzZWxlY3QiLCJzZWxlY3QiLCJlYWNoIiwiYmluZCIsImkiLCJlIiwiJG1lIiwiYWRkIiwiZGlzYWJsZVNlbGVjdCIsIm5vdCIsInN3aXRjaFN1Ym1pdFN0YXR1cyIsImNoYW5nZVNlbGVjdCIsInRhcmdldCIsImluZGV4IiwiYXQiLCJpc0NhblN1Ym1pdCIsImNzcyIsImVuYWJsZVNlbGVjdCIsIiR0YXJnZXQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZmluZCIsInJlbW92ZUF0dHIiLCJwYXJlbnRzIiwiYXR0ciIsInJlc3VsdCIsImVxIiwiU2VsZWN0aXZlU2VsZWN0TW9kZWwiLCJTZWxlY3RpdmVTZWxlY3RDb2xsZWN0aW9uIiwiU2VsZWN0aXZlU2VsZWN0IiwiY2hhbmdlIC5zZWxlY3RpdmUtc2VsZWN0X19zZWxlY3QiLCJvcHQiLCJtZSIsInJlc2V0VmFsIl0sIm1hcHBpbmdzIjoiQUFVQSxHQUFBQSxvQkFBQUMsU0FBQUMsTUFBQUMsUUFDQUMsU0FBQSxXQUNBLE9BQ0FDLElBQUEsR0FDQUMsVUFBQSxFQUNBQyxPQUFBLEtBSUFDLFdBQUEsV0FDQUMsRUFBQUMsUUFBQUMsS0FBQSxlQUNBQSxLQUFBQyxHQUFBLGFBQUFELEtBQUFF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S0FBQSxTQUFBWCxFQUFBcUIsR0FDQSxHQUFBakMsR0FBQVksRUFBQUosSUFBQSxXQUNBUixLQUFBNkMsR0FBQSxJQUNBeEMsV0FDQSxDQUNBLEdBQUF3QyxJQUFBLENBQ0F4QyxNQUFBZ0IsT0FBQUMsS0FBQW5CLEVBQUFvQixLQUFBLFNBQUFYLEVBQUFxQixHQUNBLEdBQUFqQyxHQUFBWSxFQUFBSixJQUFBLFdBQ0FSLEtBQUE2QyxHQUFBLElBQ0F4QyxPQUVBLE1BQUF3QyIsImZpbGUiOiJzdHJlbmd0aGVuaW5nLXNlbGVjdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4jIE9yZGVyZWRTZWxlY3RcbiovXG5cblxuXG4vKlxuIyMgU2VsZWN0IE1vZGVsXG4qL1xuXG52YXIgT3JkZXJlZFNlbGVjdE1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgZGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWw6ICcnLFxuICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgaW5pVmFsOiAnJ1xuICAgIH1cbiAgfSxcbiAgXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIF8uYmluZEFsbCh0aGlzLCAnY2hhbmdlVmFsdWUnKTtcbiAgICB0aGlzLm9uKCdjaGFuZ2U6dmFsJywgdGhpcy5jaGFuZ2VWYWx1ZSk7XG4gIH0sXG4gIFxuICBjaGFuZ2VWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbCA9IHRoaXMuZ2V0KCd2YWwnKSxcbiAgICAgICAgaW5pVmFsID0gdGhpcy5nZXQoJ2luaVZhbCcpLFxuICAgICAgICBzZWxlY3RlZCA9ICh2YWwgIT0gaW5pVmFsKT90cnVlOmZhbHNlO1xuICAgIHRoaXMuc2V0KCdzZWxlY3RlZCcsIHNlbGVjdGVkKTtcbiAgfVxufSk7XG5cblxuXG4vKlxuIyMgXG4qL1xuXG52YXIgT3JkZXJlZFNlbGVjdENvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG4gIG1vZGVsOiBPcmRlcmVkU2VsZWN0TW9kZWxcbn0pO1xuXG5cblxuLypcbiMjIFxuKi9cblxudmFyIE9yZGVyZWRTZWxlY3QgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gIFxuICBldmVudHM6IHtcbiAgICAnY2hhbmdlIC5vcmRlcmVkLXNlbGVjdF9fc2VsZWN0JzogJ2NoYW5nZVNlbGVjdCdcbiAgfSxcbiAgXG4gIFxuICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICBfLmJpbmRBbGwodGhpcywgJ2NoYW5nZVNlbGVjdCcsICdzd2l0Y2hTdWJtaXRTdGF0dXMnLCAnZW5hYmxlU2VsZWN0JywgJ2Rpc2FibGVTZWxlY3QnLCAnaXNDYW5TdWJtaXQnKTtcbiAgICBcbiAgICB0aGlzLiRlbmFibGVkID0gdGhpcy4kKCcub3JkZXJlZC1zZWxlY3RfX3N1Ym1pdC0tZW5hYmxlZCcpO1xuICAgIHRoaXMuJGRpc2FibGVkID0gdGhpcy4kKCcub3JkZXJlZC1zZWxlY3RfX3N1Ym1pdC0tZGlzYWJsZWQnKTtcbiAgICB0aGlzLiRzZWxlY3QgPSB0aGlzLiQoJy5vcmRlcmVkLXNlbGVjdF9fc2VsZWN0Jyk7XG4gICAgXG4gICAgdGhpcy5zZWxlY3QgPSBuZXcgT3JkZXJlZFNlbGVjdENvbGxlY3Rpb24oKTtcbiAgICB0aGlzLiRzZWxlY3QuZWFjaChfLmJpbmQoZnVuY3Rpb24oaSwgZSkge1xuICAgICAgdmFyICRtZSA9ICQoZSksXG4gICAgICAgICAgdmFsID0gJG1lLnZhbCgpO1xuICAgICAgdGhpcy5zZWxlY3QuYWRkKHtcbiAgICAgICAgdmFsOiB2YWwsXG4gICAgICAgIGluaVZhbDogdmFsXG4gICAgICB9KTtcbiAgICB9LCB0aGlzKSk7XG4gICAgXG4gICAgdGhpcy5kaXNhYmxlU2VsZWN0KCB0aGlzLiRzZWxlY3Qubm90KCc6Zmlyc3QnKSApO1xuICAgIFxuICAgIHRoaXMuc3dpdGNoU3VibWl0U3RhdHVzKCk7XG4gIH0sXG4gIFxuICBcbiAgY2hhbmdlU2VsZWN0OiBmdW5jdGlvbihlKSB7XG4gICAgdmFyICRtZSA9ICQoZS50YXJnZXQpLFxuICAgICAgICB2YWwgPSAkbWUudmFsKCksXG4gICAgICAgIGluZGV4ID0gdGhpcy4kc2VsZWN0LmluZGV4KGUudGFyZ2V0KTtcbiAgICBcbiAgICAvL2NvbnNvbGUubG9nKCdjaGFuZ2VTZWxlY3QnLCBpbmRleCk7XG4gICAgdGhpcy5zZWxlY3QuYXQoaW5kZXgpLnNldCgndmFsJywgdmFsKTtcbiAgICBcbiAgICB0aGlzLnN3aXRjaFN1Ym1pdFN0YXR1cygpO1xuICB9LFxuICBcbiAgXG4gIHN3aXRjaFN1Ym1pdFN0YXR1czogZnVuY3Rpb24oKXtcbiAgICBpZih0aGlzLmlzQ2FuU3VibWl0KCkpe1xuICAgICAgdGhpcy4kZW5hYmxlZC5jc3MoJ2Rpc3BsYXknLCdibG9jaycpO1xuICAgICAgdGhpcy4kZGlzYWJsZWQuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRlbmFibGVkLmNzcygnZGlzcGxheScsJ25vbmUnKTtcbiAgICAgIHRoaXMuJGRpc2FibGVkLmNzcygnZGlzcGxheScsJ2Jsb2NrJyk7XG4gICAgfVxuICB9LFxuICBcbiAgXG4gIGVuYWJsZVNlbGVjdDogZnVuY3Rpb24oJHRhcmdldCkge1xuICAgICR0YXJnZXRcbiAgICAgIC5yZW1vdmVDbGFzcygnb3JkZXJlZC1zZWxlY3RfX3NlbGVjdC0tZGlzYWJsZWQnKVxuICAgICAgLmFkZENsYXNzKCdvcmRlcmVkLXNlbGVjdF9fc2VsZWN0LS1lbmFibGVkJylcbiAgICAgIC5maW5kKCdvcHRpb24nKVxuICAgICAgLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgJHRhcmdldFxuICAgICAgLnBhcmVudHMoJy5vcmRlcmVkLXNlbGVjdF9fc2VsZWN0LXdyYXBwZXInKVxuICAgICAgLnJlbW92ZUNsYXNzKCdvcmRlcmVkLXNlbGVjdF9fc2VsZWN0LXdyYXBwZXItLWRpc2FibGVkJylcbiAgICAgIC5hZGRDbGFzcygnb3JkZXJlZC1zZWxlY3RfX3NlbGVjdC13cmFwcGVyLS1lbmFibGVkJyk7XG4gIH0sXG4gIFxuICBcbiAgZGlzYWJsZVNlbGVjdDogZnVuY3Rpb24oJHRhcmdldCkge1xuICAgICR0YXJnZXRcbiAgICAgIC5yZW1vdmVDbGFzcygnb3JkZXJlZC1zZWxlY3RfX3NlbGVjdC0tZW5hYmxlZCcpXG4gICAgICAuYWRkQ2xhc3MoJ29yZGVyZWQtc2VsZWN0X19zZWxlY3QtLWRpc2FibGVkJylcbiAgICAgIC5maW5kKCdvcHRpb24nKVxuICAgICAgLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgJHRhcmdldFxuICAgICAgLnBhcmVudHMoJy5vcmRlcmVkLXNlbGVjdF9fc2VsZWN0LXdyYXBwZXInKVxuICAgICAgLnJlbW92ZUNsYXNzKCdvcmRlcmVkLXNlbGVjdF9fc2VsZWN0LXdyYXBwZXItLWVuYWJsZWQnKVxuICAgICAgLmFkZENsYXNzKCdvcmRlcmVkLXNlbGVjdF9fc2VsZWN0LXdyYXBwZXItLWRpc2FibGVkJyk7XG4gIH0sXG4gIFxuICBcbiAgaXNDYW5TdWJtaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXN1bHQgPSB0cnVlO1xuICAgIHRoaXMuc2VsZWN0LmVhY2goXy5iaW5kKGZ1bmN0aW9uKG1vZGVsLCBpbmRleCl7XG4gICAgICB2YXIgc2VsZWN0ZWQgPSBtb2RlbC5nZXQoJ3NlbGVjdGVkJyk7XG4gICAgICBpZighc2VsZWN0ZWQpIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgaWYoaW5kZXgpIHtcbiAgICAgICAgaWYodGhpcy5zZWxlY3QuYXQoaW5kZXgtMSkuZ2V0KCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgdGhpcy5lbmFibGVTZWxlY3QodGhpcy4kc2VsZWN0LmVxKGluZGV4KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5kaXNhYmxlU2VsZWN0KHRoaXMuJHNlbGVjdC5lcShpbmRleCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgdGhpcykpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgXG59KTtcbiIsIi8qXG4jIFNlbGVjdGl2ZVNlbGVjdFxuKi9cblxuXG5cbi8qXG4jIyBTZWxlY3QgTW9kZWxcbiovXG5cbnZhciBTZWxlY3RpdmVTZWxlY3RNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gIGRlZmF1bHRzOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsOiAnJyxcbiAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgIGluaVZhbDogJydcbiAgICB9XG4gIH0sXG4gIFxuICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICBfLmJpbmRBbGwodGhpcywgJ2NoYW5nZVZhbHVlJyk7XG4gICAgdGhpcy5vbignY2hhbmdlOnZhbCcsIHRoaXMuY2hhbmdlVmFsdWUpO1xuICB9LFxuICBcbiAgY2hhbmdlVmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWwgPSB0aGlzLmdldCgndmFsJyksXG4gICAgICAgIGluaVZhbCA9IHRoaXMuZ2V0KCdpbmlWYWwnKSxcbiAgICAgICAgc2VsZWN0ZWQgPSAodmFsICE9IGluaVZhbCk/dHJ1ZTpmYWxzZTtcbiAgICB0aGlzLnNldCgnc2VsZWN0ZWQnLCBzZWxlY3RlZCk7XG4gIH1cbn0pO1xuXG5cblxuLypcbiMjIFxuKi9cblxudmFyIFNlbGVjdGl2ZVNlbGVjdENvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG4gIG1vZGVsOiBTZWxlY3RpdmVTZWxlY3RNb2RlbFxufSk7XG5cblxuXG4vKlxuIyMgXG4qL1xuXG52YXIgU2VsZWN0aXZlU2VsZWN0ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICBcbiAgZXZlbnRzOiB7XG4gICAgJ2NoYW5nZSAuc2VsZWN0aXZlLXNlbGVjdF9fc2VsZWN0JzogJ2NoYW5nZVNlbGVjdCdcbiAgfSxcbiAgXG4gIFxuICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHQpIHtcbiAgICBfLmJpbmRBbGwodGhpcywgJ3Jlc2V0VmFsJywgJ2NoYW5nZVNlbGVjdCcsICdzd2l0Y2hTdWJtaXRTdGF0dXMnLCAnaXNDYW5TdWJtaXQnKTtcbiAgICBcbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICB0YXJnZXQ6ICdhbGwnXG4gICAgfTtcbiAgICB0aGlzLm9wdCA9IF8uZXh0ZW5kKGRlZmF1bHRzLCBvcHQpO1xuICAgIFxuICAgIHRoaXMuJGVuYWJsZWQgPSB0aGlzLiQoJy5zZWxlY3RpdmUtc2VsZWN0X19zdWJtaXQtLWVuYWJsZWQnKTtcbiAgICB0aGlzLiRkaXNhYmxlZCA9IHRoaXMuJCgnLnNlbGVjdGl2ZS1zZWxlY3RfX3N1Ym1pdC0tZGlzYWJsZWQnKTtcbiAgICB0aGlzLiRzZWxlY3QgPSB0aGlzLiQoJy5zZWxlY3RpdmUtc2VsZWN0X19zZWxlY3QnKTtcbiAgICBcbiAgICB0aGlzLnNlbGVjdCA9IG5ldyBTZWxlY3RpdmVTZWxlY3RDb2xsZWN0aW9uKCk7XG4gICAgdGhpcy4kc2VsZWN0LmVhY2goXy5iaW5kKGZ1bmN0aW9uKGksIG1lKSB7XG4gICAgICB2YXIgJG1lID0gJChtZSksXG4gICAgICAgICAgdmFsID0gJG1lLnZhbCgpO1xuICAgICAgdGhpcy5zZWxlY3QuYWRkKHtcbiAgICAgICAgdmFsOiB2YWwsXG4gICAgICAgIGluaVZhbDogdmFsXG4gICAgICB9KTtcbiAgICB9LCB0aGlzKSk7XG4gICAgXG4gICAgLy90aGlzLmRpc2FibGVTZWxlY3QoIHRoaXMuJHNlbGVjdC5ub3QoJzpmaXJzdCcpICk7XG4gICAgXG4gICAgdGhpcy5zd2l0Y2hTdWJtaXRTdGF0dXMoKTtcbiAgfSxcbiAgXG4gIFxuICByZXNldFZhbDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZWxlY3QuZWFjaChfLmJpbmQoZnVuY3Rpb24obW9kZWwsIGkpe1xuICAgICAgdmFyIHZhbCA9IHRoaXMuJHNlbGVjdC5lcShpKS52YWwoKTtcbiAgICAgIGlmKG51bGwgPT0gdmFsKSB2YWwgPSAnJztcbiAgICAgIG1vZGVsLnNldCgndmFsJywgdmFsKTtcbiAgICB9LCB0aGlzKSk7XG4gIH0sXG4gIFxuICBcbiAgY2hhbmdlU2VsZWN0OiBmdW5jdGlvbihlKSB7XG4gICAgdmFyICRtZSA9ICQoZS50YXJnZXQpLFxuICAgICAgICB2YWwgPSAkbWUudmFsKCksXG4gICAgICAgIGluZGV4ID0gdGhpcy4kc2VsZWN0LmluZGV4KGUudGFyZ2V0KTtcbiAgICBcbiAgICB0aGlzLnNlbGVjdC5hdChpbmRleCkuc2V0KCd2YWwnLCB2YWwpO1xuICAgIFxuICAgIHRoaXMuc3dpdGNoU3VibWl0U3RhdHVzKCk7XG4gIH0sXG4gIFxuICBcbiAgc3dpdGNoU3VibWl0U3RhdHVzOiBmdW5jdGlvbigpe1xuICAgIGlmKHRoaXMuaXNDYW5TdWJtaXQoKSl7XG4gICAgICB0aGlzLiRlbmFibGVkLmNzcygnZGlzcGxheScsJ2Jsb2NrJyk7XG4gICAgICB0aGlzLiRkaXNhYmxlZC5jc3MoJ2Rpc3BsYXknLCdub25lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGVuYWJsZWQuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xuICAgICAgdGhpcy4kZGlzYWJsZWQuY3NzKCdkaXNwbGF5JywnYmxvY2snKTtcbiAgICB9XG4gIH0sXG4gIFxuICBcbiAgaXNDYW5TdWJtaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVzZXRWYWwoKTtcbiAgICBpZignYW55JyA9PSB0aGlzLm9wdC50YXJnZXQpIHtcbiAgICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2VsZWN0LmVhY2goXy5iaW5kKGZ1bmN0aW9uKG1vZGVsLCBpbmRleCl7XG4gICAgICAgIHZhciBzZWxlY3RlZCA9IG1vZGVsLmdldCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgaWYoc2VsZWN0ZWQpIHJlc3VsdCA9IHRydWU7XG4gICAgICB9LCB0aGlzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xuICAgICAgdGhpcy5zZWxlY3QuZWFjaChfLmJpbmQoZnVuY3Rpb24obW9kZWwsIGluZGV4KXtcbiAgICAgICAgdmFyIHNlbGVjdGVkID0gbW9kZWwuZ2V0KCdzZWxlY3RlZCcpO1xuICAgICAgICBpZighc2VsZWN0ZWQpIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgfSwgdGhpcykpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIFxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=